# 国内访问完整解决方案

由于Cloudflare Workers在中国大陆访问受限，本指南提供多种解决方案确保国内用户能够正常使用。

## 🚀 方案一：免费代理服务（推荐，已自动配置）

系统已配置以下免费代理服务，按优先级自动测试：

### 1. AllOrigins（优先级最高）
- **URL**: `https://api.allorigins.win`
- **特点**: 国内访问效果最好，支持CORS
- **稳定性**: ⭐⭐⭐⭐

### 2. CORS Anywhere  
- **URL**: `https://cors-anywhere.herokuapp.com`
- **特点**: 老牌代理服务，稳定可靠
- **稳定性**: ⭐⭐⭐

### 3. ThingProxy
- **URL**: `https://thingproxy.freeboard.io`
- **特点**: 简单可靠，响应快速
- **稳定性**: ⭐⭐⭐⭐

### 使用方法：
1. 直接打开网站，系统自动选择最佳代理
2. 无需任何配置，开箱即用
3. 系统会自动测试并选择可用的代理服务

## 🛠 方案二：本地代理服务器（最佳性能）

### 使用步骤：

1. **启动代理服务器**：
   ```bash
   node proxy-server.js
   ```

2. **访问网站**：
   - 打开 `index.html`
   - 系统会优先尝试本地代理服务器
   - 看到"本地代理服务器"连接成功即可使用

### 优点：
- ✅ 完全绕过网络限制
- ✅ 速度最快，延迟最低  
- ✅ 稳定可靠，不依赖第三方
- ✅ 支持所有功能

### 缺点：
- ❌ 需要运行Node.js服务器
- ❌ 仅限本机使用

## 🌐 方案三：自建Cloudflare Workers代理

### 部署步骤：

1. **创建新的Workers项目**：
   - 登录Cloudflare Dashboard
   - 创建新的Worker，命名为 `china-proxy`

2. **部署代理代码**：
   - 使用项目中的 `cloudflare-china-proxy.js` 文件
   - 部署到 `china-proxy.your-domain.workers.dev`

3. **更新配置**：
   在 `config.js` 中添加：
   ```javascript
   {
       name: '自建代理（推荐）',
       url: 'https://china-proxy.your-domain.workers.dev',
       region: 'custom-proxy',
       priority: 1
   }
   ```

## 🔗 方案四：Cloudflare IP直连

### IP地址列表：
系统已配置多个Cloudflare IP直连地址：

```bash
# 测试命令
curl -H "Host: life-station-api.life-island.workers.dev" https://162.159.192.1/api/health
curl -H "Host: life-station-api.life-island.workers.dev" https://162.159.193.1/api/health
```

### 自定义域名配置：
如果有自己的域名，可以添加路由：
```
api.your-domain.com/api/*  -> life-station-api
cn-api.your-domain.com/api/*  -> life-station-api
```

## 📱 移动端使用建议

### Android/iOS：
1. 优先尝试免费代理服务（系统自动选择）
2. 如果所有代理都失败，考虑使用科学上网工具
3. 部分地区移动网络比WiFi访问效果更好

### 微信内置浏览器：
- 可能对某些代理服务有限制
- 建议复制链接到外部浏览器打开

## 📊 方案对比

| 方案 | 国内访问 | 稳定性 | 延迟 | 配置难度 | 推荐指数 |
|------|---------|--------|------|----------|----------|
| 免费代理 | ✅ 良好 | ⭐⭐⭐⭐ | 低 | 无需配置 | ⭐⭐⭐⭐⭐ |
| 本地代理 | ✅ 完美 | ⭐⭐⭐⭐⭐ | 最低 | 需要Node.js | ⭐⭐⭐⭐ |
| 自建CF代理 | ✅ 优秀 | ⭐⭐⭐⭐⭐ | 极低 | 简单 | ⭐⭐⭐⭐ |
| IP直连 | ✅ 一般 | ⭐⭐⭐ | 低 | 中等 | ⭐⭐⭐ |

## 🔧 故障排除

### 系统自动处理：
1. **智能节点选择**：按优先级自动测试各个代理
2. **自动降级**：免费代理 → 本地代理 → IP直连 → 直连
3. **实时监控**：持续监控连接状态，自动切换
4. **兼容性优化**：针对不同网络环境优化

### 如果所有方案都失败：

1. **检查网络连接**：
   - 确保网络连接正常
   - 尝试切换WiFi/移动网络

2. **尝试不同浏览器**：
   - Chrome、Firefox、Safari、Edge
   - 清除浏览器缓存

3. **检查防火墙设置**：
   - 确保没有阻止网络请求
   - 暂时关闭杀毒软件测试

4. **最后手段**：
   - 使用VPN等科学上网工具
   - 联系网络服务提供商

## 💡 最佳实践

### 推荐配置顺序：
1. **免费代理服务**（系统默认，推荐）
2. **自建CF Workers代理**（如果有能力）
3. **本地代理服务器**（开发测试用）
4. **IP直连**（备用方案）
5. **直连**（最后选择）

### 优化建议：
1. **多节点冗余**：系统已配置多个代理服务
2. **地域优化**：优先使用对中国大陆友好的服务
3. **定期测试**：代理服务可能会变化，定期检查可用性
4. **用户反馈**：收集不同地区用户的访问情况

## 📞 技术支持

### 快速诊断：
- 系统会自动选择最佳代理，无需手动干预
- 查看浏览器控制台了解详细连接状态
- 大部分问题会自动解决

### 需要帮助？
如果遇到问题：
1. 尝试刷新页面，系统会重新选择代理
2. 确保网络连接稳定
3. 考虑使用不同的网络环境
4. 最后考虑使用科学上网工具

---

**注意**：本系统设计为自动化解决方案，大部分情况下无需用户干预即可正常使用。