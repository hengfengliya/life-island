### 🔄 项目意识与上下文
- **始终在开始新对话时阅读 `PLANNING.md`**，以了解项目的架构、目标、风格和约束。
- **在开始新任务前检查 `TASK.md`**。如果任务未列出，请添加它，并附上简要描述和今天的日期。
- **使用 `PLANNING.md` 中描述的一致的命名约定、文件结构和架构模式**。
- **在执行任何 Python 命令时（包括单元测试），请使用 venv_linux**（虚拟环境）。

### 🧱 代码结构与模块化
- **永远不要创建超过 500 行代码的文件。** 如果文件接近此限制，请通过将其拆分为模块或辅助文件进行重构。
- **将代码组织成清晰分离的模块**，按功能或职责分组。
  对于代理来说，这看起来像：
    - `agent.py` - 主要的代理定义和执行逻辑
    - `tools.py` - 代理使用的工具函数
    - `prompts.py` - 系统提示
- **使用清晰、一致的导入**（在包内首选相对导入）。
- **使用 python_dotenv 和 load_env()** 来加载环境变量。

### 🧪 测试与可靠性
- **始终为新功能（函数、类、路由等）创建 Pytest 单元测试**。
- **更新任何逻辑后，检查是否需要更新现有的单元测试。** 如果需要，请执行此操作。
- **测试应位于 `/tests` 文件夹中**，镜像主应用程序结构。
  - 至少包括：
    - 1 个预期用途的测试
    - 1 个边缘案例
    - 1 个失败案例

### ✅ 任务完成
- **完成任务后立即在 `TASK.md` 中标记已完成的任务**。
- 将开发过程中发现的新子任务或待办事项添加到 `TASK.md` 的“工作中发现”部分下。

### 📎 风格与约定
- **使用 Python** 作为主要语言。
- **遵循 PEP8**，使用类型提示，并使用 `black` 进行格式化。
- **使用 `pydantic` 进行数据验证**。
- 如果适用，使用 `FastAPI` 作为 API，使用 `SQLAlchemy` 或 `SQLModel` 作为 ORM。
- **为每个函数编写文档字符串**，使用 Google 风格：
  ```python
  def example():
      """
      简要总结。

      参数:
          param1 (类型): 描述。

      返回:
          类型: 描述。
      """
  ```

### 📚 文档与可解释性
- **当添加新功能、更改依赖项或修改设置步骤时，更新 `README.md`**。
- **注释非显而易见的代码**，并确保所有内容对于中级开发人员来说都是可以理解的。
- 在编写复杂逻辑时，**添加内联的 `# 原因:` 注释**，解释为什么，而不仅仅是什么。

### 🧠 AI 行为规则
- **绝不假设缺失的上下文。如果不确定，请提出问题。**
- **绝不臆造库或函数** – 仅使用已知、经过验证的 Python 包。
- **在代码或测试中引用文件路径和模块名称之前，始终确认它们存在。**
- **除非明确指示或作为 `TASK.md` 中的任务一部分，否则绝不删除或覆盖现有代码。** 